{"ast":null,"code":"import { getTokenTimestamp, getRefreshToken, setNewTokens } from './localstorage';\nimport axios from 'axios';\nexport function checkExpired(setLoading) {\n  const expiration_time = 3600 * 1000;\n  const timeStamp = getTokenTimestamp();\n  console.log(\"Expires In: \" + timeStamp);\n\n  if (timeStamp != null && Date.now() - timeStamp > expiration_time) {\n    console.warn('AccessToken has expired');\n    setLoading(true);\n    refreshAccessToken(setLoading);\n  }\n}\n\nasync function refreshAccessToken(setLoading) {\n  const refreshToken = getRefreshToken();\n  const {\n    data\n  } = await axios.post(\"http://localhost:8888/refresh_token\", {\n    refreshToken\n  });\n\n  if (data != null && data.accessToken) {\n    setNewTokens(data.accessToken);\n    setLoading(false);\n  }\n}","map":{"version":3,"sources":["C:/Users/asraf/Desktop/Development/ReactJS/SpotifyDashboard/client/src/utils/auth.js"],"names":["getTokenTimestamp","getRefreshToken","setNewTokens","axios","checkExpired","setLoading","expiration_time","timeStamp","console","log","Date","now","warn","refreshAccessToken","refreshToken","data","post","accessToken"],"mappings":"AAAA,SAASA,iBAAT,EAA4BC,eAA5B,EAA6CC,YAA7C,QAAiE,gBAAjE;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,OAAO,SAASC,YAAT,CAAsBC,UAAtB,EAAiC;AACpC,QAAMC,eAAe,GAAG,OAAO,IAA/B;AACA,QAAMC,SAAS,GAAGP,iBAAiB,EAAnC;AAEAQ,EAAAA,OAAO,CAACC,GAAR,CAAY,iBAAiBF,SAA7B;;AACA,MAAIA,SAAS,IAAI,IAAb,IAAqBG,IAAI,CAACC,GAAL,KAAaJ,SAAb,GAAyBD,eAAlD,EAAmE;AAC/DE,IAAAA,OAAO,CAACI,IAAR,CAAa,yBAAb;AACAP,IAAAA,UAAU,CAAC,IAAD,CAAV;AACAQ,IAAAA,kBAAkB,CAACR,UAAD,CAAlB;AACH;AACJ;;AAED,eAAeQ,kBAAf,CAAkCR,UAAlC,EAA6C;AACzC,QAAMS,YAAY,GAAGb,eAAe,EAApC;AACA,QAAM;AAACc,IAAAA;AAAD,MAAS,MAAMZ,KAAK,CAACa,IAAN,CAAW,qCAAX,EAAkD;AACnEF,IAAAA;AADmE,GAAlD,CAArB;;AAGA,MAAIC,IAAI,IAAI,IAAR,IAAgBA,IAAI,CAACE,WAAzB,EAAqC;AACjCf,IAAAA,YAAY,CAACa,IAAI,CAACE,WAAN,CAAZ;AACAZ,IAAAA,UAAU,CAAC,KAAD,CAAV;AACH;AACJ","sourcesContent":["import { getTokenTimestamp, getRefreshToken, setNewTokens } from './localstorage'\r\nimport axios from 'axios';\r\n\r\nexport function checkExpired(setLoading){\r\n    const expiration_time = 3600 * 1000;\r\n    const timeStamp = getTokenTimestamp()\r\n\r\n    console.log(\"Expires In: \" + timeStamp)\r\n    if (timeStamp != null && Date.now() - timeStamp > expiration_time) {\r\n        console.warn('AccessToken has expired');\r\n        setLoading(true)\r\n        refreshAccessToken(setLoading);\r\n    }\r\n}\r\n\r\nasync function refreshAccessToken(setLoading){\r\n    const refreshToken = getRefreshToken();\r\n    const {data} = await axios.post(\"http://localhost:8888/refresh_token\", {\r\n        refreshToken\r\n    })\r\n    if (data != null && data.accessToken){\r\n        setNewTokens(data.accessToken)\r\n        setLoading(false)\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}