{"ast":null,"code":"import { getTokenTimestamp, getRefreshToken, setNewTokens } from './localstorage';\nimport axios from 'axios';\nexport function checkExpired(expiresIn) {\n  const expiration_time = expiresIn * 1000;\n  const timeStamp = getTokenTimestamp();\n\n  if (timeStamp != null && Date.now() - timeStamp > expiration_time) {\n    console.warn('Access token has expired, refreshing...');\n    refreshAccessToken();\n  }\n}\n\nasync function refreshAccessToken() {\n  const refreshToken = getRefreshToken();\n  const {\n    data\n  } = await axios.post(\"http://localhost:8888/refresh_token\", {\n    refreshToken\n  });\n\n  if (data != null && data.accessToken) {\n    setNewTokens(data.accessToken);\n  }\n}","map":{"version":3,"sources":["C:/Users/asraf/Desktop/Development/ReactJS/SpotifyDashboard/client/src/utils/spotify.js"],"names":["getTokenTimestamp","getRefreshToken","setNewTokens","axios","checkExpired","expiresIn","expiration_time","timeStamp","Date","now","console","warn","refreshAccessToken","refreshToken","data","post","accessToken"],"mappings":"AAAA,SAASA,iBAAT,EAA4BC,eAA5B,EAA6CC,YAA7C,QAAiE,gBAAjE;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,OAAO,SAASC,YAAT,CAAsBC,SAAtB,EAAgC;AACnC,QAAMC,eAAe,GAAGD,SAAS,GAAG,IAApC;AACA,QAAME,SAAS,GAAGP,iBAAiB,EAAnC;;AACA,MAAIO,SAAS,IAAI,IAAb,IAAqBC,IAAI,CAACC,GAAL,KAAaF,SAAb,GAAyBD,eAAlD,EAAmE;AAC/DI,IAAAA,OAAO,CAACC,IAAR,CAAa,yCAAb;AACAC,IAAAA,kBAAkB;AACrB;AACJ;;AAED,eAAeA,kBAAf,GAAmC;AAC/B,QAAMC,YAAY,GAAGZ,eAAe,EAApC;AACA,QAAM;AAACa,IAAAA;AAAD,MAAS,MAAMX,KAAK,CAACY,IAAN,CAAW,qCAAX,EAAkD;AACnEF,IAAAA;AADmE,GAAlD,CAArB;;AAGA,MAAIC,IAAI,IAAI,IAAR,IAAgBA,IAAI,CAACE,WAAzB,EAAqC;AACjCd,IAAAA,YAAY,CAACY,IAAI,CAACE,WAAN,CAAZ;AACH;AACJ","sourcesContent":["import { getTokenTimestamp, getRefreshToken, setNewTokens } from './localstorage'\r\nimport axios from 'axios';\r\n\r\nexport function checkExpired(expiresIn){\r\n    const expiration_time = expiresIn * 1000;\r\n    const timeStamp = getTokenTimestamp()\r\n    if (timeStamp != null && Date.now() - timeStamp > expiration_time) {\r\n        console.warn('Access token has expired, refreshing...');\r\n        refreshAccessToken();\r\n    }\r\n}\r\n\r\nasync function refreshAccessToken(){\r\n    const refreshToken = getRefreshToken();\r\n    const {data} = await axios.post(\"http://localhost:8888/refresh_token\", {\r\n        refreshToken\r\n    })\r\n    if (data != null && data.accessToken){\r\n        setNewTokens(data.accessToken)\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}